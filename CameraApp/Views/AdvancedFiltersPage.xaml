<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="CameraApp.Views.AdvancedFiltersPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:CameraApp.ViewModels"
             xmlns:services="clr-namespace:CameraApp.Services"
             x:DataType="viewmodels:FormListViewModel"
             Title="{Binding [Filter_Title], Source={x:Static services:LocalizationResourceManager.Instance}}"
             BackgroundColor="{StaticResource Gray100}">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15">

            <!-- Categoria -->
            <Border BackgroundColor="White"
                    StrokeShape="RoundRectangle 10"
                    Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="{Binding [Filter_Category], Source={x:Static services:LocalizationResourceManager.Instance}}"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="{StaticResource Primary}" />
                    
                    <Picker Title="{Binding [Filter_SelectCategory], Source={x:Static services:LocalizationResourceManager.Instance}}"
                            ItemsSource="{Binding Categories}"
                            ItemDisplayBinding="{Binding Name}"                           
                            SelectedItem="{Binding SelectedCategoryItem}"
                            TextColor="{StaticResource Gray900}" />
                </VerticalStackLayout>
            </Border>

            <!-- Status -->
            <Border BackgroundColor="White"
                    StrokeShape="RoundRectangle 10"
                    Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="{Binding [Filter_Status], Source={x:Static services:LocalizationResourceManager.Instance}}"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="{StaticResource Primary}" />
                    
                    <Picker Title="{Binding [Filter_SelectStatus], Source={x:Static services:LocalizationResourceManager.Instance}}"
                            ItemsSource="{Binding StatusItems}"
                            ItemDisplayBinding="{Binding Name}"
                            SelectedItem="{Binding SelectedStatusItem}"
                            TextColor="{StaticResource Gray900}" />
                </VerticalStackLayout>
            </Border>

            <!-- Período -->
            <Border BackgroundColor="White"
                    StrokeShape="RoundRectangle 10"
                    Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="{Binding [Filter_Period], Source={x:Static services:LocalizationResourceManager.Instance}}"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="{StaticResource Primary}" />
                    
                    <Grid ColumnSpacing="10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <VerticalStackLayout Grid.Column="0" Spacing="5">
                            <Label Text="{Binding [Filter_From], Source={x:Static services:LocalizationResourceManager.Instance}}"
                                   FontSize="12"
                                   TextColor="{StaticResource Gray600}" />
                            <DatePicker Date="{Binding StartDate}"
                                        Format="dd/MM/yyyy"
                                        TextColor="{StaticResource Gray900}" />
                        </VerticalStackLayout>

                        <Label Grid.Column="1"
                               Text="{Binding [Filter_Until], Source={x:Static services:LocalizationResourceManager.Instance}}"
                               VerticalOptions="End"
                               Margin="0,0,0,10"
                               TextColor="{StaticResource Gray600}" />

                        <VerticalStackLayout Grid.Column="2" Spacing="5">
                            <Label Text="{Binding [Filter_UntilLabel], Source={x:Static services:LocalizationResourceManager.Instance}}"
                                   FontSize="12"
                                   TextColor="{StaticResource Gray600}" />
                            <DatePicker Date="{Binding EndDate}"
                                        Format="dd/MM/yyyy"
                                        TextColor="{StaticResource Gray900}" />
                        </VerticalStackLayout>
                    </Grid>
                </VerticalStackLayout>
            </Border>

            <!-- Criado por -->
            <Border BackgroundColor="White"
                    StrokeShape="RoundRectangle 10"
                    Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="{Binding [Filter_CreatedBy], Source={x:Static services:LocalizationResourceManager.Instance}}"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="{StaticResource Primary}" />
                    
                    <Entry Placeholder="{Binding [Filter_CreatedByPlaceholder], Source={x:Static services:LocalizationResourceManager.Instance}}"
                           Text="{Binding CreatedBy}"
                           PlaceholderColor="{StaticResource Gray600}"
                           TextColor="{StaticResource Gray900}" />
                </VerticalStackLayout>
            </Border>

            <!-- Script Sequencial -->
            <Border BackgroundColor="White"
                    StrokeShape="RoundRectangle 10"
                    Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="{Binding [Filter_ScriptType], Source={x:Static services:LocalizationResourceManager.Instance}}"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="{StaticResource Primary}" />
                    
                    <HorizontalStackLayout Spacing="20">
                        <CheckBox IsChecked="{Binding FilterSequentialScript}"
                                  Color="{StaticResource Primary}" />
                        <Label Text="{Binding [Filter_OnlySequential], Source={x:Static services:LocalizationResourceManager.Instance}}"
                               VerticalOptions="Center"
                               TextColor="{StaticResource Gray900}" />
                    </HorizontalStackLayout>
                </VerticalStackLayout>
            </Border>

            <!-- Pontuação -->
            <Border BackgroundColor="White"
                    StrokeShape="RoundRectangle 10"
                    Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="{Binding [Filter_Score], Source={x:Static services:LocalizationResourceManager.Instance}}"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="{StaticResource Primary}" />
                    
                    <Grid ColumnSpacing="10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <VerticalStackLayout Grid.Column="0" Spacing="5">
                            <Label Text="{Binding [Filter_ScoreMin], Source={x:Static services:LocalizationResourceManager.Instance}}"
                                   FontSize="12"
                                   TextColor="{StaticResource Gray600}" />
                            <Entry Placeholder="0"
                                   Text="{Binding MinScore}"
                                   Keyboard="Numeric"
                                   PlaceholderColor="{StaticResource Gray600}"
                                   TextColor="{StaticResource Gray900}" />
                        </VerticalStackLayout>

                        <Label Grid.Column="1"
                               Text="—"
                               VerticalOptions="End"
                               Margin="0,0,0,10"
                               TextColor="{StaticResource Gray600}" />

                        <VerticalStackLayout Grid.Column="2" Spacing="5">
                            <Label Text="{Binding [Filter_ScoreMax], Source={x:Static services:LocalizationResourceManager.Instance}}"
                                   FontSize="12"
                                   TextColor="{StaticResource Gray600}" />
                            <Entry Placeholder="100"
                                   Text="{Binding MaxScore}"
                                   Keyboard="Numeric"
                                   PlaceholderColor="{StaticResource Gray600}"
                                   TextColor="{StaticResource Gray900}" />
                        </VerticalStackLayout>
                    </Grid>
                </VerticalStackLayout>
            </Border>

            <!-- Ordenação -->
            <Border BackgroundColor="White"
                    StrokeShape="RoundRectangle 10"
                    Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="{Binding [Filter_OrderBy], Source={x:Static services:LocalizationResourceManager.Instance}}"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="{StaticResource Primary}" />
                    
                    <Picker Title="{Binding [Filter_OrderByTitle], Source={x:Static services:LocalizationResourceManager.Instance}}"
                            SelectedIndex="{Binding OrderByIndex}"
                            TextColor="{StaticResource Gray900}">
                        <Picker.Items>
                            <x:String>Título</x:String>
                            <x:String>Data de Criação</x:String>
                            <x:String>Data de Modificação</x:String>
                            <x:String>Pontuação</x:String>
                            <x:String>Categoria</x:String>
                        </Picker.Items>
                    </Picker>

                    <HorizontalStackLayout Spacing="20">
                        <CheckBox IsChecked="{Binding OrderAscending}"
                                  Color="{StaticResource Primary}" />
                        <Label Text="{Binding [Filter_OrderAscending], Source={x:Static services:LocalizationResourceManager.Instance}}"
                               VerticalOptions="Center"
                               TextColor="{StaticResource Gray900}" />
                    </HorizontalStackLayout>
                </VerticalStackLayout>
            </Border>

            <!-- Botões de ação -->
            <Grid ColumnSpacing="10" Margin="0,20,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Button Grid.Column="0"
                        Text="{Binding [Filter_ClearAll], Source={x:Static services:LocalizationResourceManager.Instance}}"
                        Command="{Binding ClearAdvancedFiltersCommand}"
                        BackgroundColor="{StaticResource Secondary}"
                        TextColor="White"
                        CornerRadius="8"
                        Padding="0,15" />

                <Button Grid.Column="1"
                        Text="{Binding [Filter_Apply], Source={x:Static services:LocalizationResourceManager.Instance}}"
                        Command="{Binding ApplyAdvancedFiltersCommand}"
                        BackgroundColor="{StaticResource Primary}"
                        TextColor="White"
                        CornerRadius="8"
                        Padding="0,15" />
            </Grid>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
